/* ═══════════════════════════════════════════════════
   HOLOGRAPHIC CARD — Pokemon/Sorare-style effect
   ═══════════════════════════════════════════════════ */

:root {
  --pointer-x: 50%;
  --pointer-y: 50%;
  --card-opacity: 0;
  --rotate-x: 0deg;
  --rotate-y: 0deg;
  --background-x: 50%;
  --background-y: 50%;
  --card-scale: 1;
  --translate-x: 0px;
  --translate-y: 0px;
  --pointer-from-center: 0;
  --pointer-from-top: 0.5;
  --pointer-from-left: 0.5;
}

/* ── Color Palette ─────────────────────────────────── */

.holo-card {
  --card-aspect: 0.718;
  --card-radius: 4.55% / 3.5%;

  --card-edge: hsl(47, 100%, 78%);
  --card-glow: hsl(142, 90%, 45%);

  /* Sunpillar rainbow */
  --sunpillar-1: hsl(2, 100%, 73%);
  --sunpillar-2: hsl(53, 100%, 69%);
  --sunpillar-3: hsl(93, 100%, 69%);
  --sunpillar-4: hsl(176, 100%, 76%);
  --sunpillar-5: hsl(228, 100%, 74%);
  --sunpillar-6: hsl(283, 100%, 73%);

  /* Rainbow shorthand */
  --red: #f80e35;
  --yellow: #eedf10;
  --green: #21e985;
  --blue: #0dbde9;
  --violet: #c929f1;

  /* Glitter noise (inline SVG) */
  --glitter: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='1.5' numOctaves='4' seed='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='.5'/%3E%3C/svg%3E");
  --glittersize: 25%;

  /* Grain noise */
  --grain: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='turbulence' baseFrequency='0.65' numOctaves='3' seed='5' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23g)' opacity='.4'/%3E%3C/svg%3E");
}

/* ── Card Container ────────────────────────────────── */

.holo-card {
  transform: translate3d(0px, 0px, 0.01px);
  pointer-events: none;
  z-index: calc(var(--card-scale) * 2);
  will-change: transform, visibility, z-index;
  transform-style: preserve-3d;
}

.holo-card,
.holo-card * {
  outline: 1px solid transparent; /* anti-alias trick */
}

.holo-card,
.holo-card__rotator {
  aspect-ratio: var(--card-aspect);
  border-radius: var(--card-radius);
}

.holo-card.interacting {
  z-index: calc(var(--card-scale) * 120);
}

/* ── Translater (position + scale) ─────────────────── */

.holo-card__translater,
.holo-card__rotator {
  display: grid;
  perspective: 600px;
  will-change: transform, box-shadow;
  transform-origin: center;
  transform-style: preserve-3d;
}

.holo-card__translater {
  width: auto;
  position: relative;
  transform: translate3d(
    var(--translate-x),
    var(--translate-y),
    0.01px
  ) scale(var(--card-scale));
}

/* ── Rotator (3D tilt + glow shadow) ───────────────── */

.holo-card__rotator {
  transform: rotateY(var(--rotate-x)) rotateX(var(--rotate-y));
  transform-style: preserve-3d;
  pointer-events: auto;
  border: none;
  background: transparent;
  padding: 0;
  appearance: none;
  cursor: pointer;
}

.holo-card__rotator {
  transition: box-shadow 0.4s ease, opacity 0.33s ease-out;
  box-shadow:
    0 0 3px -1px transparent,
    0 0 2px 1px transparent,
    0 0 5px 0px transparent,
    0px 10px 20px -5px black,
    0 2px 15px -5px black,
    0 0 20px 0px transparent;
}

.holo-card.interacting .holo-card__rotator {
  box-shadow:
    0 0 3px -1px white,
    0 0 3px 1px var(--card-edge),
    0 0 12px 2px var(--card-glow),
    0px 10px 20px -5px black,
    0 0 40px -30px var(--card-glow),
    0 0 50px -20px var(--card-glow);
}

/* ── Shared child styles ───────────────────────────── */

.holo-card__rotator > * {
  width: 100%;
  display: grid;
  grid-area: 1/1;
  aspect-ratio: var(--card-aspect);
  border-radius: var(--card-radius);
  image-rendering: optimizeQuality;
  transform-style: preserve-3d;
  pointer-events: none;
  overflow: hidden;
}

.holo-card__rotator img {
  height: auto;
  width: 100%;
  display: block;
  grid-area: 1/1;
  border-radius: var(--card-radius);
}

/* ── Front face ────────────────────────────────────── */

.holo-card__front {
  opacity: 1;
  transform: translate3d(0px, 0px, 0.01px);
  backface-visibility: hidden;
}

.holo-card__front img {
  backface-visibility: hidden;
  transform: translate3d(0px, 0px, 0.01px);
}

/* ═══════════════════════════════════════════════════
   SHINE LAYER — The holographic rainbow
   ═══════════════════════════════════════════════════ */

.holo-card__shine {
  display: grid;
  transform: translateZ(1px);
  overflow: hidden;
  z-index: 3;

  --scanlines-space: 1px;
  --scanlines-light: #666;
  --scanlines-dark: black;
  --bars: 3%;
  --bar-color: hsla(0, 0%, 70%, 1);
  --bar-bg: hsla(0, 0%, 0%, 1);

  background-image:
    repeating-linear-gradient(110deg,
      var(--violet), var(--blue), var(--green), var(--yellow), var(--red),
      var(--violet), var(--blue), var(--green), var(--yellow), var(--red),
      var(--violet), var(--blue), var(--green), var(--yellow), var(--red)
    ),
    repeating-linear-gradient(90deg,
      var(--scanlines-dark) calc(var(--scanlines-space) * 0),
      var(--scanlines-dark) calc(var(--scanlines-space) * 2),
      var(--scanlines-light) calc(var(--scanlines-space) * 2),
      var(--scanlines-light) calc(var(--scanlines-space) * 4)
    );

  background-position:
    calc(((50% - var(--background-x)) * 2.6) + 50%)
    calc(((50% - var(--background-y)) * 3.5) + 50%),
    center center;

  background-size: 400% 400%, cover;
  background-blend-mode: overlay;

  filter: brightness(1.1) contrast(1.1) saturate(1.2);
  mix-blend-mode: color-dodge;
  opacity: var(--card-opacity);

  will-change: transform, opacity, background-image, background-size,
    background-position, background-blend-mode, filter;
}

/* Shine ::before — horizontal bar overlay */
.holo-card__shine::before {
  content: "";
  grid-area: 1/1;
  border-radius: var(--card-radius);
  transform: translateZ(1px);

  background-image:
    repeating-linear-gradient(90deg,
      var(--bar-bg) calc(var(--bars)*2),
      var(--bar-color) calc(var(--bars)*3),
      var(--bar-bg) calc(var(--bars)*3.5),
      var(--bar-color) calc(var(--bars)*4),
      var(--bar-bg) calc(var(--bars)*5),
      var(--bar-bg) calc(var(--bars)*14)
    ),
    repeating-linear-gradient(90deg,
      var(--bar-bg) calc(var(--bars)*2),
      var(--bar-color) calc(var(--bars)*3),
      var(--bar-bg) calc(var(--bars)*3.5),
      var(--bar-color) calc(var(--bars)*4),
      var(--bar-bg) calc(var(--bars)*5),
      var(--bar-bg) calc(var(--bars)*10)
    );

  background-position:
    calc((((50% - var(--background-x)) * 1.65) + 50%) + (var(--background-y) * 0.5)) var(--background-x),
    calc((((50% - var(--background-x)) * -0.9) + 50%) - (var(--background-y) * 0.75)) var(--background-y);

  background-size: 200% 200%, 200% 200%;
  background-blend-mode: screen;
  filter: brightness(1.15) contrast(1.1);
  mix-blend-mode: hard-light;
}

/* Shine ::after — radial spotlight */
.holo-card__shine::after {
  content: "";
  grid-area: 1/1;
  border-radius: var(--card-radius);
  transform: translateZ(1.2px);

  background-image:
    radial-gradient(
      farthest-corner circle at var(--pointer-x) var(--pointer-y),
      hsla(0, 0%, 90%, 0.8) 0%,
      hsla(0, 0%, 78%, 0.1) 25%,
      hsl(0, 0%, 0%) 90%
    );

  mix-blend-mode: luminosity;
  filter: brightness(0.6) contrast(4);
}


/* ═══════════════════════════════════════════════════
   GLARE LAYER — The spotlight
   ═══════════════════════════════════════════════════ */

.holo-card__glare {
  transform: translateZ(1.41px);
  overflow: hidden;
  z-index: 4;

  background-image: radial-gradient(
    farthest-corner circle at var(--pointer-x) var(--pointer-y),
    hsla(0, 0%, 100%, 0.8) 10%,
    hsla(0, 0%, 100%, 0.65) 20%,
    hsla(0, 0%, 0%, 0.5) 90%
  );

  opacity: calc(var(--card-opacity) * 0.8);
  filter: brightness(0.8) contrast(1.5);
  mix-blend-mode: overlay;

  will-change: transform, opacity, background-image, background-size,
    background-position, background-blend-mode, filter;
}

/* ═══════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════ */

@media screen and (max-width: 900px) {
  .holo-card__shine {
    --scanlines-space: 0.5px;
  }
}
